PUNTO 2

CREATE TABLESPACE avianca DATAFILE 'avianca_file.dat' SIZE 2000M ONLINE;
CREATE UNDO TABLESPACE avianca_undo DATAFILE 'avianca_file.f' SIZE 25M AUTOEXTEND ON RETENTION GUARANTEE;

PUNTO 3

alter system set UNDO_TABLESPACE=avianca_undo;

PUNTO 4

CREATE USER dba_alex  IDENTIFIED BY dba_alex  DEFAULT TABLESPACE avianca QUOTA UNLIMITED ON avianca; 
GRANT DBA, CONNECT TO dba_alex;  

PUNTO 5

CREATE PROFILE CLERK LIMIT 
  PASSWORD_LIFE_TIME 45
  SESSIONS_PER_USER 1
  IDLE_TIME  10
  FAILED_LOGIN_ATTEMPTS 4;

CREATE PROFILE development LIMIT 
  PASSWORD_LIFE_TIME 100
  SESSIONS_PER_USER 2
  IDLE_TIME  30
  FAILED_LOGIN_ATTEMPTS 0;


PUNTO 6

CREATE USER MESSI  IDENTIFIED BY MESSI  DEFAULT TABLESPACE AVIANCA QUOTA UNLIMITED ON AVIANCA PROFILE development; 
grant connect to MESSI;

CREATE USER JAMES  IDENTIFIED BY JAMES  DEFAULT TABLESPACE AVIANCA QUOTA UNLIMITED ON AVIANCA PROFILE development; 
grant connect to JAMES;

CREATE USER CRISTIANO  IDENTIFIED BY CRISTIANO  DEFAULT TABLESPACE AVIANCA QUOTA UNLIMITED ON AVIANCA PROFILE CLERK; 
grant connect to CRISTIANO;

CREATE USER RONALDINO  IDENTIFIED BY RONALDINO  DEFAULT TABLESPACE AVIANCA QUOTA UNLIMITED ON AVIANCA PROFILE CLERK; 
grant connect to RONALDINO;


PUNTO 8

MATRICULAS
CREATE TABLE ENROLLMENT (REGISTRATION VARCHAR2(50) NOT NULL, AIRCRAF_TYPE VARCHAR2(100) NOT NULL, SERIAL_NUMBER INT NOT NULL, AGE VARCHAR2(50), CHAIRS INT );
ALTER TABLE ENROLLMENT ADD CONSTRAINT ENROLLMENT_PK
PRIMARY KEY (ID);
ALTER TABLE ENROLLMENT ADD CONSTRAINT FK_ENROLLMENT_TYPE
FOREIGN KEY (AIRCRAFT_TYPE) REFERENCES AIRPLANE_TYPE(ID);

PAIS

CREATE TABLE COUNTRY (ID NUMBER GENERATED ALWAYS AS IDENTITY, COUNTRY VARCHAR2(100) NOT NULL);
ALTER TABLE COUNTRY ADD CONSTRAINT PK_COUNTRY
PRIMARY KEY (ID);

CIUDAD
CREATE TABLE CITY (ID NUMBER GENERATED ALWAYS AS IDENTITY, CITY VARCHAR2(100) NOT NULL, COUNTRY_ID INT NOT NULL);
ALTER TABLE CITY ADD CONSTRAINT PK_CITY
PRIMARY KEY (ID);
ALTER TABLE CITY ADD CONSTRAINT FK_CITY_COUNTRY
FOREIGN KEY (COUNTRY_ID) REFERENCES COUNTRY(ID);

TIPO DE AVION
CREATE TABLE AIRPLANE_TYPE (ID NUMBER GENERATED ALWAYS AS IDENTITY, TYPE VARCHAR2(100) NOT NULL, QUANTITY INT NOT NULL);
ALTER TABLE AIRPLANE_TYPE ADD CONSTRAINT PK_AIRPLANE_TYPE
PRIMARY KEY (ID);


CONFIGURACION TRIPULACION
CREATE TABLE CONFIGURATION_CREW_MEMBER (ID NUMBER GENERATED ALWAYS AS IDENTITY, ENROLLMENT_REGISTRATION VARCHAR2(50) NOT NULL, CREW_MEMBER INT NOT NULL);
ALTER TABLE CONFIGURATION_CREW_MEMBER  ADD CONSTRAINT PK_CONFIGURATION_CREW_MEMBER 
PRIMARY KEY (ID);
ALTER TABLE CONFIGURATION_CREW_MEMBER  ADD CONSTRAINT FK_CONFIGURATION_CREW_MEMBER_ENROLLMENT
FOREIGN KEY (ENROLLMENT_REGISTRATION) REFERENCES ENROLLMENT(REGISTRATION);

TIPO DE EMPLEADO
CREATE TABLE EMPLOYEES_TYPE (ID NUMBER GENERATED ALWAYS AS IDENTITY, TYPE VARCHAR2(100) NOT NULL);
ALTER TABLE EMPLOYEES_TYPE  ADD CONSTRAINT PK_EMPLOYEES_TYPE  
PRIMARY KEY (ID);

SEXO
CREATE TABLE SEX (ID NUMBER GENERATED ALWAYS AS IDENTITY, TYPE VARCHAR2(50) NOT NULL);
ALTER TABLE SEX  ADD CONSTRAINT PK_SEX  
PRIMARY KEY (ID);

ESTADO EMPLEADO
CREATE TABLE EMPLOYEE_STATE (ID NUMBER GENERATED ALWAYS AS IDENTITY, STATE VARCHAR2(100) NOT NULL);
ALTER TABLE EMPLOYEE_STATE  ADD CONSTRAINT PK_EMPLOYEE_STATE  
PRIMARY KEY (ID);

EMPLEADO
CREATE TABLE EMPLOYEE (ID NUMBER GENERATED ALWAYS AS IDENTITY, NAME VARCHAR2(200) NOT NULL, LAST_NAME VARCHAR2(200) NOT NULL, SEX_ID INT NOT NULL, BIRTH_DATE DATE, ANTIQUITY INT, LAST_TRAINING_DATE DATE, ADDRESS VARCHAR2(200), EMAIL VARCHAR(100), CONTACT_CELL VARCHAR(20), REST_HOURS_LAS_FLIGHT INT, STATE_ID INT NOT NULL, COUNTRY_LOCATION_ID INT NOT NULL, CITY_LOCATION_ID INT NOT NULL, EMPLOYEE_TYPE_ID INT NOT NULL);
ALTER TABLE EMPLOYEE  ADD CONSTRAINT PK_EMPLOYEE  
PRIMARY KEY (ID);
ALTER TABLE EMPLOYEE  ADD CONSTRAINT FK_EMPLOYEE_SEX_ID
FOREIGN KEY (SEX_ID) REFERENCES SEX(ID);
ALTER TABLE EMPLOYEE  ADD CONSTRAINT FK_EMPLOYEE_STATE_ID
FOREIGN KEY (STATE_ID) REFERENCES EMPLOYEE_STATE(ID);
ALTER TABLE EMPLOYEE  ADD CONSTRAINT FK_EMPLOYEE_COUNTRY_ID
FOREIGN KEY (COUNTRY_LOCATION_ID) REFERENCES COUNTRY(ID);
ALTER TABLE EMPLOYEE  ADD CONSTRAINT FK_EMPLOYEE_CITY_ID
FOREIGN KEY (CITY_LOCATION_ID) REFERENCES CITY(ID);
ALTER TABLE EMPLOYEE  ADD CONSTRAINT FK_EMPLOYEE_TYPE_ID
FOREIGN KEY (EMPLOYEE_TYPE_ID) REFERENCES EMPLOYEES_TYPE(ID);

NIVEL DE INGLES
CREATE TABLE LEVEL_E (ID NUMBER GENERATED ALWAYS AS IDENTITY, LEVEL_E VARCHAR2(100) NOT NULL);
ALTER TABLE LEVEL_E   ADD CONSTRAINT PK_LEVEL_E  
PRIMARY KEY (ID);

INFORMACION ADICIONAL
CREATE TABLE ADDITIONAL_DATA (ID NUMBER GENERATED ALWAYS AS IDENTITY, EMPLOYEE_ID INT NOT NULL, ACUM_HOURS_FLIGHT INT, TYPE_LICENSE_ID INT NOT NULL, APOINTMENT_ID INT NOT NULL, LEVEL_E_ID INT NOT NULL)
ALTER TABLE ADDITIONAL_DATA  ADD CONSTRAINT PK_ADDITIONAL_DATA 
PRIMARY KEY (ID);
ALTER TABLE ADDITIONAL_DATA  ADD CONSTRAINT FK_ADDITIONAL_DATA_EMPLOYEE_ID
FOREIGN KEY (EMPLOYEE_ID) REFERENCES EMPLOYEE(EMPLOYEE_ID);
ALTER TABLE ADDITIONAL_DATA  ADD CONSTRAINT FK_ADDITIONAL_DATA_TYPE_LICENSE_ID
FOREIGN KEY (TYPE_LICENSE_ID) REFERENCES TYPE_LICENSE(ID);
ALTER TABLE ADDITIONAL_DATA  ADD CONSTRAINT FK_ADDITIONAL_DATA_APOINTMENT_ID
FOREIGN KEY (APOINTMENT_ID) REFERENCES APOINTMENT(ID);
ALTER TABLE ADDITIONAL_DATA  ADD CONSTRAINT FK_ADDITIONAL_DATA_LEVEL_E_ID
FOREIGN KEY (LEVEL_E_ID) REFERENCES LEVEL_E(ID);

TIPO LICENCIA
CREATE TABLE TYPE_LICENSE (ID NUMBER GENERATED ALWAYS AS IDENTITY, LICENSE VARCHAR2(50) NOT NULL)
ALTER TABLE TYPE_LICENSE  ADD CONSTRAINT PK_TYPE_LICENSE
PRIMARY KEY (ID);

LICENCIA HABILITADA
CREATE TABLE ENABLE_LICENSE (ID NUMBER GENERATED ALWAYS AS IDENTITY, ENABLE VARCHAR2(50) NOT NULL);
ALTER TABLE ENABLE_LICENSE   ADD CONSTRAINT PK_ENABLE_LICENSE 
PRIMARY KEY (ID);

CARGO
CREATE TABLE APOINTMENT (ID NUMBER GENERATED ALWAYS AS IDENTITY, NAME VARCHAR2(50) NOT NULL);
ALTER TABLE APOINTMENT  ADD CONSTRAINT PK_APOINTMENT 
PRIMARY KEY (ID);

LICENSIA HABILITADO
CREATE TABLE INTERMEDIE_ENABLELICENSE (ID NUMBER GENERATED ALWAYS AS IDENTITY, TYPE_LICENSE_ID INT NOT NULL, ENABLE_LICENSE_ID INT NOT NULL);
ALTER TABLE INTERMEDIE_ENABLELICENSE  ADD CONSTRAINT PK_INTERMEDIE_ENABLELICENSE 
PRIMARY KEY (ID);
ALTER TABLE INTERMEDIE_ENABLELICENSE   ADD CONSTRAINT FK_INTERMEDIE_ENABLELICENSE_TYPE_LICENSE_ID
FOREIGN KEY (TYPE_LICENSE_ID) REFERENCES TYPE_LICENSE(ID);
ALTER TABLE INTERMEDIE_ENABLELICENSE   ADD CONSTRAINT FK_INTERMEDIE_ENABLELICENSE_ENABLE_LICENSE_ID
FOREIGN KEY (ENABLE_LICENSE_ID) REFERENCES ENABLE_LICENSE(ID);

AEROPUERTO
CREATE TABLE AIRPORT (ID NUMBER GENERATED ALWAYS AS IDENTITY, COUNTRY_ID INT NOT NULL, CITY_ID INT NOT NULL, ABBREVIATION_AIRPORT VARCHAR2(50) NOT NULL, NAME VARCHAR2(200) NOT NULL, LATITUDE DECIMAL(2,7), LONGITUDE DECIMAL(2,7));
ALTER TABLE AIRPORT  ADD CONSTRAINT PK_AIRPORT 
PRIMARY KEY (ID);
ALTER TABLE AIRPORT ADD CONSTRAINT FK_AIRPORT_COUNTRY_ID
FOREIGN KEY (COUNTRY_ID) REFERENCES COUNTRY(ID);
ALTER TABLE AIRPORT ADD CONSTRAINT FK_AIRPORT_CITY_ID
FOREIGN KEY (CITY_ID) REFERENCES CITY(ID);

RUTA DEL AEROPUERTO
CREATE TABLE AIRPORT_ROUTES (ID NUMBER GENERATED ALWAYS AS IDENTITY, AIRPORT_ORIGIN_ID INT NOT NULL, AIRPORT_TARGET_ID INT NOT NULL,ENROLLMENT_REGISTRATION VARCHAR2(100) NOT NULL, FRECUENCY_ID INT NOT NULL, AIRPLANETYPE_TYPE VARCHAR2(100), AVERAGE_HOURS DECIMAL(5,2));
ALTER TABLE AIRPORT_ROUTES  ADD CONSTRAINT PK_AIRPORT_ROUTES
PRIMARY KEY (ID);
ALTER TABLE AIRPORT_ROUTES ADD CONSTRAINT FK_AIRPORT_ROUTES_AIRPORT_ORIGIN_ID
FOREIGN KEY (AIRPORT_ORIGIN_ID) REFERENCES AIRPORT(ID);
ALTER TABLE AIRPORT_ROUTES ADD CONSTRAINT FK_AIRPORT_ROUTES_AIRPORT_TARGET_ID
FOREIGN KEY (AIRPORT_TARGET_ID) REFERENCES AIRPORT(ID);
ALTER TABLE AIRPORT_ROUTES ADD CONSTRAINT FK_AIRPORT_ROUTES_ENROLLMENT_REGISTRATION
FOREIGN KEY (ENROLLMENT_REGISTRATION) REFERENCES ENROLLMENT(REGISTRATION);
ALTER TABLE AIRPORT_ROUTES ADD CONSTRAINT FK_AIRPORT_ROUTES_FRECUENCY_ID
FOREIGN KEY (FRECUENCY_ID) REFERENCES FRECUENCY(ID);
ALTER TABLE AIRPORT_ROUTES ADD CONSTRAINT FK_AIRPORT_ROUTES_AIRPLANETYPE_TYPE
FOREIGN KEY (AIRPLANETYPE_TYPE) REFERENCES AIRPLANE_TYPE(ID);

FRECUENCIA
CREATE TABLE FRECUENCY (ID NUMBER GENERATED ALWAYS AS IDENTITY, FRECUENCY INT NOT NULL);
ALTER TABLE FRECUENCY  ADD CONSTRAINT PK_FRECUENCY 
PRIMARY KEY (ID);

ITINERARIO RUTA 
CREATE TABLE ROUTE_ITINERARY (ID NUMBER GENERATED ALWAYS AS IDENTITY, AIRPORT_ROUTES_ID INT NOT NULL, DEPARTURE_DATE DATE);
ALTER TABLE ROUTE_ITINERARY  ADD CONSTRAINT PK_ROUTE_ITINERARY  
PRIMARY KEY (ID);
ALTER TABLE ROUTE_ITINERARY  ADD CONSTRAINT FK_ROUTE_ITINERARY_AIRPORT_ROUTES_ID
FOREIGN KEY (AIRPORT_ROUTES_ID) REFERENCES AIRPORT_ROUTES(ID);
ALTER TABLE ROUTE_ITINERARY  ADD CONSTRAINT FK_ROUTE_ITINERARY_AIRPORT_ROUTES_ID
FOREIGN KEY (AIRPORT_ROUTES_ID) REFERENCES AIRPORT_ROUTES(ID);

VUELO CONFIRMADO
CREATE TABLE CONFIRMED_FLIGHTS (ID NUMBER GENERATED ALWAYS AS IDENTITY, PILOT_ID INT NOT NULL, COP_PILOT_ID INT NOT NULL, TIME_ESTIMATE_DEPARTURE DATE, TIME_ESTIMATE_ARRIVE DATE, TIME_NOW_DEPARTURE DATE, TIME_NOW_ARRIVE DATE, DURATION_REAL VARCHAR(50), ENROLLMENT_REGISTRATION VARCHAR(100));
ALTER TABLE CONFIRMED_FLIGHTS  ADD CONSTRAINT PK_CONFIRMED_FLIGHTS 
PRIMARY KEY (ID);
ALTER TABLE CONFIRMED_FLIGHTS  ADD CONSTRAINT FK_CONFIRMED_FLIGHTS_PILOT_ID
FOREIGN KEY (PILOT_ID) REFERENCES EMPLOYEES(ID);
ALTER TABLE CONFIRMED_FLIGHTS  ADD CONSTRAINT FK_CONFIRMED_FLIGHTS_COP_PILOT_ID
FOREIGN KEY (COP_PILOT_ID) REFERENCES EMPLOYEES(ID);
ALTER TABLE CONFIRMED_FLIGHTS  ADD CONSTRAINT FK_CONFIRMED_FLIGHTS_ENROLLMENT_REGISTRATION
FOREIGN KEY (ENROLLMENT_REGISTRATION) REFERENCES ENROLLMENT(REGISTRATION);

TRIPULANTES ASIGNADOS
CREATE TABLE ASSIGNED_CREW (ID NUMBER GENERATED ALWAYS AS IDENTITY, CONFIRMED_FLIGHTS_ID INT NOT NULL, CREW_ID INT NOT NULL);
ALTER TABLE ASSIGNED_CREW   ADD CONSTRAINT PK_ASSIGNED_CREW  
PRIMARY KEY (ID);
ALTER TABLE ASSIGNED_CREW  ADD CONSTRAINT FK_ASSIGNED_CREW_CONFIRMED_FLIGHTS_ID
FOREIGN KEY (CONFIRMED_FLIGHTS_ID) REFERENCES CONFIRMED_FLIGHTS(ID);
ALTER TABLE ASSIGNED_CREW  ADD CONSTRAINT FK_ASSIGNED_CREW_CREW_ID
FOREIGN KEY (CREW_ID) REFERENCES EMPLOYEES(ID);

PASAJERO
CREATE TABLE PASSANGER (ID NUMBER GENERATED ALWAYS AS IDENTITY, IDENTIFICATION VARCHAR2(50) NOT NULL, NAME VARCHAR2(200) NOT NULL, LAST_NAME VARCHAR2(50) NOT NULL, TYPE_IDENTIFICATION VARCHAR(50) NOT NULL, CONFIRMED_FLIGHT_ID INT NOT NULL, NAME_CONTACT_EMERGENCY VARCHAR2(100), LAST_NAME_CONTACT_EMERGENCY VARCHAR(100 ), PAIS_ID_CONTACT_EMERGENCY INT NOT NULL, CITY_ID_CONTACT_EMERGENCY INT NOT NULL, EMAIL_CONTACT VARCHAR2(100), PHONE_CONTACT_EMERGENCY VARCHAR2(50));
ALTER TABLE PASSANGER  ADD CONSTRAINT PK_PASSANGER   
PRIMARY KEY (ID);
ALTER TABLE PASSANGER  ADD CONSTRAINT FK_PASSANGER_CONFIRMED_FLIGHT_ID
FOREIGN KEY (CONFIRMED_FLIGHT_ID) REFERENCES CONFIRMED_FLIGHTS(ID);
ALTER TABLE PASSANGER  ADD CONSTRAINT FK_PASSANGER_PAIS_ID_CONTACT_EMERGENCY
FOREIGN KEY (PAIS_ID_CONTACT_EMERGENCY) REFERENCES COUNTRY(ID);
ALTER TABLE PASSANGER  ADD CONSTRAINT FK_PASSANGER_CITY_ID_CONTACT_EMERGENCY
FOREIGN KEY (CITY_ID_CONTACT_EMERGENCY) REFERENCES CITY(ID);
